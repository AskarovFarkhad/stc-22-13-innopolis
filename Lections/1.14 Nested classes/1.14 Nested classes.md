## 1.14 Вложенные классы

**Вложенный класс** - это класс, который определен внутри другого класса.

Есть 4 вида вложенных классов:

* Вложенные внутренние (не статические) классы - классы, объекты которых создаются, только если создан объект внешнего класса.

* Вложенные статические классы - статический класс, внутри вашего класса. Ему не нужен для создания своего объекта - объект внешнего класса.

* Локальные классы - классы, которые определены внутри методов. (Не статических)

* Анонимные классы - классы, у которых нет имени. (О них поговорим на следующем занятии)



### Внутренние классы (Вложенные не статические)

```JAVA
class A {
	class B {

	}
}
```

* Существуют только у объектов, потому что для создания объекта внутреннего класса нужен объект внешнего класса.

* Внутри внутреннего класса не может быть статических переменных. Статические переменные выносятся во внешний класс.

* У обоих классов есть доступ к полям друг друга. Даже если стоит модификатор private.

```JAVA
class A {

	private String test;
	private B b;

	//Для того, что бы обратиться к переменным класса B, нужна ссылка на его объект
	//в данном случае - это объектная переменная b
	//если нам нужно вызвать переменную innerTest, то это будет выглядеть так:
	//b.innerTest
	class B {
		//Все переменный класса А доступны внутри класса B
		private String innerTest;
	}
}
```

* Можно получить ссылку на экземпляр внешнего класса:

> **НАИМЕНОВАНИЕ_КЛАССА.this**

```JAVA
class A {

	private String test;
	private B b;

	//Для того, что бы обратиться к переменным класса B, нужна ссылка на его объект
	//в данном случае - это объектная переменная b
	//если нам нужно вызвать переменную innerTest, то это будет выглядеть так:
	//b.innerTest
	class B {
		private String test;

		//За счет того, что и во внешнем классе, и во внутреннем есть переменная с одним
		//и тем же наименованием, то по умолчанию будет выбрана переменная, которая
		//находится в том же классе, что место, где она вызывается
		//для того, чтобы вызвать переменную внешнего класса, а не внутреннего, нужно 
		//написать вот так:
		//A.this.test - Мы ссылаемся на объект внешнего класса и вызываем его переменную
		public void test() {
			System.out.println(test);
		}
	}
}
```

### Вложенные статические классы

* Экземпляры вложенных статических классов не нуждаются в объекте внешнего (родительского) класса.

* Уменьшается количество файлов классов.

* Классы группируются по своей "категории"



### Локальные классы

Данные классы объявляются внутри других методов. 
* Обладают всеми свойствами внутреннего (нестатического вложенного) класса, но создавать их экземпляры можно только в методе, при чем метод не может быть статическим (для их создания нужен экземпляр внешнего класса, в нестатические методы неявно передается ссылка на экземпляр вызывающего объекта, а в статическом методе данной ссылки нет). 
* Локальные классы обладают доступом к переменным метода.
* Локальные классы способны работать только с final переменными метода. Все дело в том, что экземпляры локальных классов способны сохраняться в памяти после завершения работы метода, а переменная может быть стёрта. Если же переменная объявлена final, то компилятор может сохранить копию переменной для дальнейшего использования объектом.
* Локальные классы нельзя объявлять с модификаторами доступа.

```JAVA
class A {

	public void test() {
		int number = 10;
		class LocalClass {
			void print() {
				System.out.println(number);
			}
		}

		LocalClass local = new LocalClass();
		local.print();
	}
}
```